(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{OImq:function(e,n,o){"use strict";o.r(n),o.d(n,"_frontmatter",(function(){return d})),o.d(n,"default",(function(){return g}));var t=o("cxan"),a=o("+wNj"),r=o("ERkP"),s=o("ZVZ0"),i=o("9Rvw"),u=o("x6WP"),c=o("E1Lo"),l=o("qbsg"),b=o("gyOS"),m=(o("l1C2"),["components"]),d={};void 0!==d&&d&&d===Object(d)&&Object.isExtensible(d)&&!d.hasOwnProperty("__filemeta")&&Object.defineProperty(d,"__filemeta",{configurable:!0,value:{name:"_frontmatter",filename:"packages/hooks/usePromise/index.mdx"}});var p={_frontmatter:d},O=i.a;function g(e){var n,o=e.components,g=Object(a.a)(e,m);return Object(s.b)(O,Object(t.a)({},p,g,{components:o,mdxType:"MDXLayout"}),Object(s.b)("h1",{id:"usepromise"},"usePromise"),Object(s.b)("p",null,"Dá Subscribe e retorna o resultado de uma promise e quando o componente desmonta (unmount) também dá unsubscribe,\ndiminuindo assim o risco de Memory Leak. ",Object(s.b)("strong",{parentName:"p"},"Como useEffect que retorna o valor da Promise")),Object(s.b)("h2",{id:"como-usar"},"Como usar"),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-tsx"},"const [value, error, loading] = usePromise(() => userService.get(), []);\n\nreturn (\n  <div>\n    {loading ? 'Carregando' : ''}\n    {value}\n  </div>\n);\n")),Object(s.b)(l.c,{__position:0,__code:"() => {\n  const [reset, setReset] = useState()\n  const [value, error, loading] = usePromise(\n    () => new Promise(resolve => setTimeout(() => resolve('olá'), 2000)),\n    [reset],\n  )\n  const onReset = useCallback(() => setReset(Date.now()), [])\n  return (\n    <div>\n      <Typography>Value: {value}</Typography>\n      <Typography>Loading: {loading.toString()}</Typography>\n      <Button onClick={onReset} variant=\"text\">\n        Reset\n      </Button>\n    </div>\n  )\n}",__scope:(n={props:g,DefaultLayout:i.a,useState:r.useState,useCallback:r.useCallback,Button:u.a,Typography:c.a,Playground:l.c,usePromise:b.a},n.DefaultLayout=i.a,n._frontmatter=d,n),mdxType:"Playground"},(function(){var e=Object(r.useState)(),n=e[0],o=e[1],t=Object(b.a)((function(){return new Promise((function(e){return setTimeout((function(){return e("olá")}),2e3)}))}),[n]),a=t[0],i=(t[1],t[2]),l=Object(r.useCallback)((function(){return o(Date.now())}),[]);return Object(s.b)("div",null,Object(s.b)(c.a,{mdxType:"Typography"},"Value: ",a),Object(s.b)(c.a,{mdxType:"Typography"},"Loading: ",i.toString()),Object(s.b)(u.a,{onClick:l,variant:"text",mdxType:"Button"},"Reset"))})),Object(s.b)("h2",{id:"cuidados"},"Cuidados"),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},Object(s.b)("strong",{parentName:"li"},"Erros")," ocorridos serão automaticamentes logados e as o ",Object(s.b)("strong",{parentName:"li"},"onUnhandledError")," no ",Object(s.b)("strong",{parentName:"li"},"setHoustonHooksConfig"),"\nfor setado."),Object(s.b)("li",{parentName:"ul"},"O valor inicial será ",Object(s.b)("strong",{parentName:"li"},"undefined"),", lembre-se de tratar isso quando estiver usando.")),Object(s.b)("h2",{id:"parâmetros-e-retorno"},"Parâmetros e Retorno"),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-ts"},"/**\n * @param promiseGenerator Função que retorna uma Promise\n * @param deps Lista de dependências\n * @returns [\n *    value: valor de retorno do Promise,\n *    error: se ocorrer um erro, ele será passado aqui,\n *    loading: boolean se esta carregando ou não\n * ]\n */\nexport default usePromise<T>(promiseGenerator: () => Promise<any>, deps: React.DependencyList): [T, any, boolean];\n")))}void 0!==g&&g&&g===Object(g)&&Object.isExtensible(g)&&!g.hasOwnProperty("__filemeta")&&Object.defineProperty(g,"__filemeta",{configurable:!0,value:{name:"MDXContent",filename:"packages/hooks/usePromise/index.mdx"}}),g.isMDXComponent=!0}}]);
//# sourceMappingURL=component---packages-hooks-use-promise-index-mdx-dd99f58f705c7d19f09d.js.map