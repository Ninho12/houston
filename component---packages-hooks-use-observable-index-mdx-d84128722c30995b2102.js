(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"1K59":function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a("HlNb"),o=a("B8Tz");function r(e,t){return void 0===e&&(e=0),void 0===t&&(t=n.b),e<0&&(e=0),Object(o.a)(e,e,t)}},WnAq:function(e,t,a){"use strict";a.r(t),a.d(t,"_frontmatter",(function(){return v})),a.d(t,"default",(function(){return j}));var n=a("cxan"),o=a("+wNj"),r=a("ERkP"),s=a("ZVZ0"),u=a("9Rvw"),b=a("1K59"),l=a("e1tN"),c=a("PCew"),i=a("gH1A"),d=a("x6WP"),p=a("E1Lo"),m=a("qbsg"),O=a("BzPC"),v=(a("l1C2"),{});void 0!==v&&v&&v===Object(v)&&Object.isExtensible(v)&&!v.hasOwnProperty("__filemeta")&&Object.defineProperty(v,"__filemeta",{configurable:!0,value:{name:"_frontmatter",filename:"packages/hooks/useObservable/index.mdx"}});var y={_frontmatter:v},g=u.a;function j(e){var t,a,j=e.components,f=Object(o.a)(e,["components"]);return Object(s.b)(g,Object(n.a)({},y,f,{components:j,mdxType:"MDXLayout"}),Object(s.b)("h1",{id:"useobservable"},"useObservable"),Object(s.b)("p",null,"Dá Subscribe e retorna o resultado de um Observable e quando o componente desmonta (unmount) também dá unsubscribe,\ndiminuindo assim o risco de Memory Leak. ",Object(s.b)("strong",{parentName:"p"},"Como useEffect que retorna o valor do Observable")),Object(s.b)("h2",{id:"como-usar"},"Como usar"),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-tsx"},"const [value, error, completed, loading] = useObservable(() => userService.get(), []);\n\nreturn (\n  <div>\n    {loading ? 'Carregando' : ''}\n    {value}\n  </div>\n);\n")),Object(s.b)(m.c,{__position:0,__code:'() => {\n  const [reset, setReset] = useState()\n  const [value, error, completed] = useObservable(\n    () => interval(1000).pipe(take(10)),\n    [reset],\n  )\n  const onReset = useCallback(() => setReset(Date.now()), [])\n  return (\n    <div>\n      <Typography>Value: {value}</Typography>\n      <Typography>Completed: {completed.toString()}</Typography>\n      <Button onClick={onReset} variant="text">\n        Reset\n      </Button>\n    </div>\n  )\n}',__scope:(t={props:f,DefaultLayout:u.a,useState:r.useState,useCallback:r.useCallback,interval:b.a,of:l.a,delay:c.a,take:i.a,Button:d.a,Typography:p.a,Playground:m.c,useObservable:O.a},t.DefaultLayout=u.a,t._frontmatter=v,t),mdxType:"Playground"},(function(){var e=Object(r.useState)(),t=e[0],a=e[1],n=Object(O.a)((function(){return Object(b.a)(1e3).pipe(Object(i.a)(10))}),[t]),o=n[0],u=(n[1],n[2]),l=Object(r.useCallback)((function(){return a(Date.now())}),[]);return Object(s.b)("div",null,Object(s.b)(p.a,{mdxType:"Typography"},"Value: ",o),Object(s.b)(p.a,{mdxType:"Typography"},"Completed: ",u.toString()),Object(s.b)(d.a,{onClick:l,variant:"text",mdxType:"Button"},"Reset"))})),Object(s.b)("h2",{id:"cuidados"},"Cuidados"),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},Object(s.b)("strong",{parentName:"li"},"Erros")," ocorridos serão automaticamentes logados (não tratados) se as o ",Object(s.b)("strong",{parentName:"li"},"onUnhandledError")," no ",Object(s.b)("strong",{parentName:"li"},"setHoustonHooksConfig"),"\nfor setado, mas se utilizar o operador catchError esse erro não será logado pois foi previamente tratado,\nnesse caso o log deve ser feito manualmente."),Object(s.b)("li",{parentName:"ul"},"O valor inicial será ",Object(s.b)("strong",{parentName:"li"},"undefined"),", lembre-se de tratar isso quando estiver usando:")),Object(s.b)(m.c,{__position:1,__code:"() => {\n  const [reset, setReset] = useState()\n  const [user, error, completed, loading] = useObservable(\n    () => of({ name: 'Eduzz' }).pipe(delay(2000)),\n    [reset],\n  )\n  const onReset = useCallback(() => setReset(Date.now()), [])\n  return (\n    <div>\n      <Typography>Value: {user && user.name}</Typography>\n      <Typography>Loading: {loading.toString()}</Typography>\n      <Button onClick={onReset} variant=\"text\">\n        Reset\n      </Button>\n    </div>\n  )\n}",__scope:(a={props:f,DefaultLayout:u.a,useState:r.useState,useCallback:r.useCallback,interval:b.a,of:l.a,delay:c.a,take:i.a,Button:d.a,Typography:p.a,Playground:m.c,useObservable:O.a},a.DefaultLayout=u.a,a._frontmatter=v,a),mdxType:"Playground"},(function(){var e=Object(r.useState)(),t=e[0],a=e[1],n=Object(O.a)((function(){return Object(l.a)({name:"Eduzz"}).pipe(Object(c.a)(2e3))}),[t]),o=n[0],u=(n[1],n[2],n[3]),b=Object(r.useCallback)((function(){return a(Date.now())}),[]);return Object(s.b)("div",null,Object(s.b)(p.a,{mdxType:"Typography"},"Value: ",o&&o.name),Object(s.b)(p.a,{mdxType:"Typography"},"Loading: ",u.toString()),Object(s.b)(d.a,{onClick:b,variant:"text",mdxType:"Button"},"Reset"))})),Object(s.b)("h2",{id:"parâmetros-e-retorno"},"Parâmetros e Retorno"),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-ts"},"/**\n * @param observableGenerator Função que retorna um Observable\n * @param deps Lista de dependências\n * @returns [\n *    value: valor de retorno do Observable,\n *    error: se ocorrer um erro, ele será passado aqui,\n *    complete: boolean se o observable foi completado ou não,\n *    loading: boolean se esta carregando ou não\n * ]\n */\nexport default useObservable<T>(observableGenerator: () => Observable<T>, deps: React.DependencyList): [T, any, boolean, boolean];\n")))}void 0!==j&&j&&j===Object(j)&&Object.isExtensible(j)&&!j.hasOwnProperty("__filemeta")&&Object.defineProperty(j,"__filemeta",{configurable:!0,value:{name:"MDXContent",filename:"packages/hooks/useObservable/index.mdx"}}),j.isMDXComponent=!0}}]);
//# sourceMappingURL=component---packages-hooks-use-observable-index-mdx-d84128722c30995b2102.js.map