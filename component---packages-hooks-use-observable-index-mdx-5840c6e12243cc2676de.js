(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{WnAq:function(e,t,a){"use strict";a.r(t),a.d(t,"_frontmatter",(function(){return g})),a.d(t,"default",(function(){return T}));var n=a("cxan"),o=a("+wNj"),r=a("ERkP"),s=a("ZVZ0"),u=a("9Rvw"),b=a("HlNb"),l=a("B8Tz");function c(e,t){return void 0===e&&(e=0),void 0===t&&(t=b.b),e<0&&(e=0),Object(l.a)(e,e,t)}var i=a("e1tN"),d=a("PCew"),p=a("gH1A"),m=a("x6WP"),O=a("E1Lo"),v=a("qbsg"),y=a("BzPC"),g=(a("l1C2"),{});void 0!==g&&g&&g===Object(g)&&Object.isExtensible(g)&&!g.hasOwnProperty("__filemeta")&&Object.defineProperty(g,"__filemeta",{configurable:!0,value:{name:"_frontmatter",filename:"packages/hooks/useObservable/index.mdx"}});var j={_frontmatter:g},f=u.a;function T(e){var t,a,b=e.components,l=Object(o.a)(e,["components"]);return Object(s.b)(f,Object(n.a)({},j,l,{components:b,mdxType:"MDXLayout"}),Object(s.b)("h1",{id:"useobservable"},"useObservable"),Object(s.b)("p",null,"Dá Subscribe e retorna o resultado de um Observable e quando o componente desmonta (unmount) também dá unsubscribe,\ndiminuindo assim o risco de Memory Leak."),Object(s.b)("h2",{id:"como-usar"},"Como usar"),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-tsx"},"const [value, error, completed, loading] = useObservable(() => userService.get(), []);\n\nreturn (\n  <div>\n    {loading ? 'Carregando' : ''}\n    {value}\n  </div>\n);\n")),Object(s.b)(v.c,{__position:0,__code:'() => {\n  const [reset, setReset] = useState()\n  const [value, error, completed] = useObservable(\n    () => interval(1000).pipe(take(10)),\n    [reset],\n  )\n  const onReset = useCallback(() => setReset(Date.now()), [])\n  return (\n    <div>\n      <Typography>Value: {value}</Typography>\n      <Typography>Completed: {completed.toString()}</Typography>\n      <Button onClick={onReset} variant="text">\n        Reset\n      </Button>\n    </div>\n  )\n}',__scope:(t={props:l,DefaultLayout:u.a,useState:r.useState,useCallback:r.useCallback,interval:c,of:i.a,delay:d.a,take:p.a,Button:m.a,Typography:O.a,Playground:v.c,useObservable:y.a},t.DefaultLayout=u.a,t._frontmatter=g,t),mdxType:"Playground"},(function(){var e=Object(r.useState)(),t=e[0],a=e[1],n=Object(y.a)((function(){return c(1e3).pipe(Object(p.a)(10))}),[t]),o=n[0],u=(n[1],n[2]),b=Object(r.useCallback)((function(){return a(Date.now())}),[]);return Object(s.b)("div",null,Object(s.b)(O.a,{mdxType:"Typography"},"Value: ",o),Object(s.b)(O.a,{mdxType:"Typography"},"Completed: ",u.toString()),Object(s.b)(m.a,{onClick:b,variant:"text",mdxType:"Button"},"Reset"))})),Object(s.b)("h2",{id:"cuidados"},"Cuidados"),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},Object(s.b)("strong",{parentName:"li"},"Erros")," ocorridos serão automaticamentes logados (não tratados) se as o ",Object(s.b)("strong",{parentName:"li"},"onUnhandledError")," no ",Object(s.b)("strong",{parentName:"li"},"setHoustonHooksConfig"),"\nfor setado, mas se utilizar o operador catchError esse erro não será logado pois foi previamente tratado,\nnesse caso o log deve ser feito manualmente."),Object(s.b)("li",{parentName:"ul"},"O valor inicial será ",Object(s.b)("strong",{parentName:"li"},"undefined"),", lembre-se de tratar isso quando estiver usando:")),Object(s.b)(v.c,{__position:1,__code:"() => {\n  const [reset, setReset] = useState()\n  const [user, error, completed, loading] = useObservable(\n    () => of({ name: 'Eduzz' }).pipe(delay(2000)),\n    [reset],\n  )\n  const onReset = useCallback(() => setReset(Date.now()), [])\n  return (\n    <div>\n      <Typography>Value: {user && user.name}</Typography>\n      <Typography>Loading: {loading.toString()}</Typography>\n      <Button onClick={onReset} variant=\"text\">\n        Reset\n      </Button>\n    </div>\n  )\n}",__scope:(a={props:l,DefaultLayout:u.a,useState:r.useState,useCallback:r.useCallback,interval:c,of:i.a,delay:d.a,take:p.a,Button:m.a,Typography:O.a,Playground:v.c,useObservable:y.a},a.DefaultLayout=u.a,a._frontmatter=g,a),mdxType:"Playground"},(function(){var e=Object(r.useState)(),t=e[0],a=e[1],n=Object(y.a)((function(){return Object(i.a)({name:"Eduzz"}).pipe(Object(d.a)(2e3))}),[t]),o=n[0],u=(n[1],n[2],n[3]),b=Object(r.useCallback)((function(){return a(Date.now())}),[]);return Object(s.b)("div",null,Object(s.b)(O.a,{mdxType:"Typography"},"Value: ",o&&o.name),Object(s.b)(O.a,{mdxType:"Typography"},"Loading: ",u.toString()),Object(s.b)(m.a,{onClick:b,variant:"text",mdxType:"Button"},"Reset"))})),Object(s.b)("h2",{id:"parâmetros-e-retorno"},"Parâmetros e Retorno"),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-ts"},"/**\n * @param observableGenerator Função que retorna um Observable\n * @param deps Lista de dependências\n * @returns [\n *    value: valor de retorno do Observable,\n *    error: se ocorrer um erro, ele será passado aqui,\n *    complete: boolean se o observable foi completado ou não,\n *    loading: boolean se esta carregando ou nào\n * ]\n */\nexport default useObservable<T>(observableGenerator: observerFunction<T>, deps: React.DependencyList): [T, any, boolean, boolean, undefined];\n")))}void 0!==T&&T&&T===Object(T)&&Object.isExtensible(T)&&!T.hasOwnProperty("__filemeta")&&Object.defineProperty(T,"__filemeta",{configurable:!0,value:{name:"MDXContent",filename:"packages/hooks/useObservable/index.mdx"}}),T.isMDXComponent=!0}}]);
//# sourceMappingURL=component---packages-hooks-use-observable-index-mdx-5840c6e12243cc2676de.js.map