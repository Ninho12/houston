(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{WnAq:function(e,a,t){"use strict";t.r(a),t.d(a,"_frontmatter",(function(){return y})),t.d(a,"default",(function(){return f}));var n=t("cxan"),o=t("+wNj"),r=t("ERkP"),s=t("ZVZ0"),b=t("9Rvw"),u=t("qbsg"),l=t("gRWN"),c=t("p6lB"),i=t("qWve"),p=t("1Z6p"),d=t("x6WP"),m=t("E1Lo"),O=t("BzPC"),v=(t("l1C2"),["components"]),y={};void 0!==y&&y&&y===Object(y)&&Object.isExtensible(y)&&!y.hasOwnProperty("__filemeta")&&Object.defineProperty(y,"__filemeta",{configurable:!0,value:{name:"_frontmatter",filename:"packages/hooks/useObservable/index.mdx"}});var g={_frontmatter:y},j=b.a;function f(e){var a,t,f=e.components,T=Object(o.a)(e,v);return Object(s.b)(j,Object(n.a)({},g,T,{components:f,mdxType:"MDXLayout"}),Object(s.b)("h1",{id:"useobservable"},"useObservable"),Object(s.b)("p",null,"Dá Subscribe e retorna o resultado de um Observable e quando o componente desmonta (unmount) também dá unsubscribe,\ndiminuindo assim o risco de Memory Leak. ",Object(s.b)("strong",{parentName:"p"},"Como useEffect que retorna o valor do Observable")),Object(s.b)("h2",{id:"como-usar"},"Como usar"),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-tsx"},"const [value, error, completed, loading] = useObservable(() => userService.get(), []);\n\nreturn (\n  <div>\n    {loading ? 'Carregando' : ''}\n    {value}\n  </div>\n);\n")),Object(s.b)(u.c,{__position:0,__code:'() => {\n  const [reset, setReset] = useState()\n  const [value, error, completed] = useObservable(\n    () => interval(1000).pipe(take(10)),\n    [reset],\n  )\n  const onReset = useCallback(() => setReset(Date.now()), [])\n  return (\n    <div>\n      <Typography>Value: {value}</Typography>\n      <Typography>Completed: {completed.toString()}</Typography>\n      <Button onClick={onReset} variant="text">\n        Reset\n      </Button>\n    </div>\n  )\n}',__scope:(a={props:T,DefaultLayout:b.a,useState:r.useState,useCallback:r.useCallback,Playground:u.c,interval:l.a,of:c.a,delay:i.a,take:p.a,Button:d.a,Typography:m.a,useObservable:O.a},a.DefaultLayout=b.a,a._frontmatter=y,a),mdxType:"Playground"},(function(){var e=Object(r.useState)(),a=e[0],t=e[1],n=Object(O.a)((function(){return Object(l.a)(1e3).pipe(Object(p.a)(10))}),[a]),o=n[0],b=(n[1],n[2]),u=Object(r.useCallback)((function(){return t(Date.now())}),[]);return Object(s.b)("div",null,Object(s.b)(m.a,{mdxType:"Typography"},"Value: ",o),Object(s.b)(m.a,{mdxType:"Typography"},"Completed: ",b.toString()),Object(s.b)(d.a,{onClick:u,variant:"text",mdxType:"Button"},"Reset"))})),Object(s.b)("h2",{id:"cuidados"},"Cuidados"),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},Object(s.b)("strong",{parentName:"li"},"Erros")," ocorridos serão automaticamentes logados (não tratados) se as o ",Object(s.b)("strong",{parentName:"li"},"onUnhandledError")," no ",Object(s.b)("strong",{parentName:"li"},"setHoustonHooksConfig"),"\nfor setado, mas se utilizar o operador catchError esse erro não será logado pois foi previamente tratado,\nnesse caso o log deve ser feito manualmente."),Object(s.b)("li",{parentName:"ul"},"O valor inicial será ",Object(s.b)("strong",{parentName:"li"},"undefined"),", lembre-se de tratar isso quando estiver usando:")),Object(s.b)(u.c,{__position:1,__code:"() => {\n  const [reset, setReset] = useState()\n  const [user, error, completed, loading] = useObservable(\n    () => of({ name: 'Eduzz' }).pipe(delay(2000)),\n    [reset],\n  )\n  const onReset = useCallback(() => setReset(Date.now()), [])\n  return (\n    <div>\n      <Typography>Value: {user && user.name}</Typography>\n      <Typography>Loading: {loading.toString()}</Typography>\n      <Button onClick={onReset} variant=\"text\">\n        Reset\n      </Button>\n    </div>\n  )\n}",__scope:(t={props:T,DefaultLayout:b.a,useState:r.useState,useCallback:r.useCallback,Playground:u.c,interval:l.a,of:c.a,delay:i.a,take:p.a,Button:d.a,Typography:m.a,useObservable:O.a},t.DefaultLayout=b.a,t._frontmatter=y,t),mdxType:"Playground"},(function(){var e=Object(r.useState)(),a=e[0],t=e[1],n=Object(O.a)((function(){return Object(c.a)({name:"Eduzz"}).pipe(Object(i.a)(2e3))}),[a]),o=n[0],b=(n[1],n[2],n[3]),u=Object(r.useCallback)((function(){return t(Date.now())}),[]);return Object(s.b)("div",null,Object(s.b)(m.a,{mdxType:"Typography"},"Value: ",o&&o.name),Object(s.b)(m.a,{mdxType:"Typography"},"Loading: ",b.toString()),Object(s.b)(d.a,{onClick:u,variant:"text",mdxType:"Button"},"Reset"))})),Object(s.b)("h2",{id:"parâmetros-e-retorno"},"Parâmetros e Retorno"),Object(s.b)("pre",null,Object(s.b)("code",{parentName:"pre",className:"language-ts"},"/**\n * @param observableGenerator Função que retorna um Observable\n * @param deps Lista de dependências\n * @returns [\n *    value: valor de retorno do Observable,\n *    error: se ocorrer um erro, ele será passado aqui,\n *    complete: boolean se o observable foi completado ou não,\n *    loading: boolean se esta carregando ou não\n * ]\n */\nexport default useObservable<T>(observableGenerator: () => Observable<T>, deps: React.DependencyList): [T, any, boolean, boolean];\n")))}void 0!==f&&f&&f===Object(f)&&Object.isExtensible(f)&&!f.hasOwnProperty("__filemeta")&&Object.defineProperty(f,"__filemeta",{configurable:!0,value:{name:"MDXContent",filename:"packages/hooks/useObservable/index.mdx"}}),f.isMDXComponent=!0}}]);
//# sourceMappingURL=component---packages-hooks-use-observable-index-mdx-b8c61f7278fec4dfdf20.js.map