(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{WnAq:function(e,t,n){"use strict";n.r(t),n.d(t,"_frontmatter",(function(){return ae})),n.d(t,"default",(function(){return le}));var r=n("cxan"),o=n("+wNj"),i=n("ERkP"),u=n("ZVZ0"),a=n("9Rvw"),c=n("qW9K"),s=n("cof6"),l=function(e){function t(t,n){return e.call(this)||this}return Object(c.e)(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(s.a),b={setInterval:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=b.delegate;return((null==n?void 0:n.setInterval)||setInterval).apply(void 0,Object(c.h)([],Object(c.g)(e)))})),clearInterval:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){var t=b.delegate;return((null==t?void 0:t.clearInterval)||clearInterval)(e)})),delegate:void 0},f=n("hwPV"),d=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return Object(c.e)(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),b.setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!=n&&this.delay===n&&!1===this.pending)return t;b.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n,r=!1;try{this.work(e)}catch(o){r=!0,n=!!o&&o||new Error(o)}if(r)return this.unsubscribe(),n},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,n=this.scheduler,r=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Object(f.a)(r,this),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(l),p={now:function(){return(p.delegate||Date).now()},delegate:void 0},h=function(){function e(t,n){void 0===n&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(n,t)},e.now=p.now,e}(),v=new(function(e){function t(t,n){void 0===n&&(n=h.now);var r=e.call(this,t,n)||this;return r.actions=[],r._active=!1,r._scheduled=void 0,r}return Object(c.e)(t,e),t.prototype.flush=function(e){var t=this.actions;if(this._active)t.push(e);else{var n;this._active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(h))(d),y=v,m=n("wla3"),O="function"==typeof Symbol&&Symbol.observable||"@@observable";function g(e){return e}function j(e){return 0===e.length?g:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var w=n("JL5j"),_=n("ms5U"),x=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r,o=(r=e)&&r instanceof m.b||function(e){return e&&Object(_.a)(e.next)&&Object(_.a)(e.error)&&Object(_.a)(e.complete)}(r)&&Object(s.b)(r)?e:new m.a(e,t,n);if(w.a.useDeprecatedSynchronousErrorHandling)this._deprecatedSyncErrorSubscribe(o);else{var i=this.operator,u=this.source;o.add(i?i.call(o,u):u?this._subscribe(o):this._trySubscribe(o))}return o},e.prototype._deprecatedSyncErrorSubscribe=function(e){var t=e;t._syncErrorHack_isSubscribing=!0;var n=this.operator;if(n)e.add(n.call(e,this.source));else try{e.add(this._subscribe(e))}catch(o){t.__syncError=o}for(var r=t;r;){if("__syncError"in r)try{throw r.__syncError}finally{e.unsubscribe()}r=r.destination}t._syncErrorHack_isSubscribing=!1},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=S(t))((function(t,r){var o;o=n.subscribe((function(t){try{e(t)}catch(n){r(n),null==o||o.unsubscribe()}}),r,t)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[O]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length?j(e)(this):this},e.prototype.toPromise=function(e){var t=this;return new(e=S(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function S(e){var t;return null!==(t=null!=e?e:w.a.Promise)&&void 0!==t?t:Promise}function k(e){return e&&Object(_.a)(e.schedule)}function T(e,t,n){void 0===e&&(e=0),void 0===n&&(n=y);var r=-1;return null!=t&&(k(t)?n=t:r=t),new x((function(t){var o,i=(o=e)instanceof Date&&!isNaN(o)?+e-n.now():e;i<0&&(i=0);var u=0;return n.schedule((function(){t.closed||(t.next(u++),0<=r?this.schedule(void 0,r):t.complete())}),i)}))}function C(e,t){return void 0===e&&(e=0),void 0===t&&(t=v),e<0&&(e=0),T(e,e,t)}function E(e,t){return new x((function(n){var r=0;return t.schedule((function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())}))}))}var R=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function I(e){return Object(_.a)(null==e?void 0:e.then)}var P="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function D(e){return Object(_.a)(e[O])}function N(e){return Object(_.a)(null==e?void 0:e[P])}function L(e){return Symbol.asyncIterator&&Object(_.a)(null==e?void 0:e[Symbol.asyncIterator])}function A(e){return new TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function q(e){return Object(c.a)(this,arguments,(function(){var t,n,r;return Object(c.f)(this,(function(o){switch(o.label){case 0:t=e.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,Object(c.c)(t.read())];case 3:return n=o.sent(),r=n.value,n.done?[4,Object(c.c)(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,Object(c.c)(r)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}function B(e){return Object(_.a)(null==e?void 0:e.getReader)}var z=n("jcUK");function V(e){if(e instanceof x)return e;if(null!=e){if(D(e))return r=e,new x((function(e){var t=r[O]();if(Object(_.a)(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if(R(e))return H(e);if(I(e))return n=e,new x((function(e){n.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,z.a)}));if(L(e))return M(e);if(N(e))return t=e,new x((function(e){var n,r;try{for(var o=Object(c.i)(t),i=o.next();!i.done;i=o.next()){var u=i.value;if(e.next(u),e.closed)return}}catch(a){n={error:a}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}e.complete()}));if(B(e))return M(q(e))}var t,n,r;throw A(e)}function H(e){return new x((function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()}))}function M(e){return new x((function(t){(function(e,t){var n,r,o,i;return Object(c.d)(this,void 0,void 0,(function(){var u,a;return Object(c.f)(this,(function(s){switch(s.label){case 0:s.trys.push([0,5,6,11]),n=Object(c.b)(e),s.label=1;case 1:return[4,n.next()];case 2:if((r=s.sent()).done)return[3,4];if(u=r.value,t.next(u),t.closed)return[2];s.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=s.sent(),o={error:a},[3,11];case 6:return s.trys.push([6,,9,10]),r&&!r.done&&(i=n.return)?[4,i.call(n)]:[3,8];case 7:s.sent(),s.label=8;case 8:return[3,10];case 9:if(o)throw o.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))}))})(e,t).catch((function(e){return t.error(e)}))}))}function U(e,t){return t?E(e,t):H(e)}function F(e){return e[e.length-1]}function J(e){return k(F(e))?e.pop():void 0}function W(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=J(e);return n?E(e,n):U(e)}function X(e){return function(t){if(function(e){return Object(_.a)(null==e?void 0:e.lift)}(t))return t.lift((function(t){try{return e(t,this)}catch(n){this.error(n)}}));throw new TypeError("Unable to lift unknown Observable type")}}var G=function(e){function t(t,n,r,o,i){var u=e.call(this,t)||this;return u.onFinalize=i,u._next=n?function(e){try{n(e)}catch(r){t.error(r)}}:e.prototype._next,u._error=o?function(e){try{o(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,u._complete=r?function(){try{r()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,u}return Object(c.e)(t,e),t.prototype.unsubscribe=function(){var t,n=this.closed;e.prototype.unsubscribe.call(this),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))},t}(m.b);function K(e,t){return X((function(n,r){var o=0;n.subscribe(new G(r,(function(n){r.next(e.call(t,n,o++))})))}))}function Y(e,t,n){return void 0===n&&(n=1/0),Object(_.a)(t)?Y((function(n,r){return K((function(e,o){return t(n,e,r,o)}))(V(e(n,r)))}),n):("number"==typeof t&&(n=t),X((function(t,r){return function(e,t,n,r,o,i,u,a){var c=[],s=0,l=0,b=!1,f=function(){!b||c.length||s||t.complete()},d=function(e){return s<r?p(e):c.push(e)},p=function e(a){i&&t.next(a),s++;var b=!1;V(n(a,l++)).subscribe(new G(t,(function(e){null==o||o(e),i?d(e):t.next(e)}),(function(){b=!0}),void 0,(function(){if(b)try{s--;for(var n=function(){var n=c.shift();u?t.add(u.schedule((function(){return e(n)}))):e(n)};c.length&&s<r;)n();f()}catch(o){t.error(o)}})))};return e.subscribe(new G(t,d,(function(){b=!0,f()}))),function(){null==a||a()}}(t,r,e,n)})))}function Z(){return void 0===(e=1)&&(e=1/0),Y(g,e);var e}var Q=new x((function(e){return e.complete()}));function $(e){return e<=0?function(){return Q}:X((function(t,n){var r=0;t.subscribe(new G(n,(function(t){++r<=e&&(n.next(t),e<=r&&n.complete())})))}))}var ee=n("0mha");function te(e,t){return t?function(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Z()(U(e,J(e)))}(t.pipe($(1),X((function(e,t){e.subscribe(new G(t,ee.a))}))),n.pipe(te(e)))}:Y((function(t,n){return e(t,n).pipe($(1),function(e){return K((function(){return e}))}(t))}))}function ne(e,t){void 0===t&&(t=v);var n=T(e,t);return te((function(){return n}))}var re=n("x6WP"),oe=n("E1Lo"),ie=n("qbsg"),ue=n("BzPC"),ae=(n("l1C2"),{});void 0!==ae&&ae&&ae===Object(ae)&&Object.isExtensible(ae)&&!ae.hasOwnProperty("__filemeta")&&Object.defineProperty(ae,"__filemeta",{configurable:!0,value:{name:"_frontmatter",filename:"packages/hooks/useObservable/index.mdx"}});var ce={_frontmatter:ae},se=a.a;function le(e){var t,n,c=e.components,s=Object(o.a)(e,["components"]);return Object(u.b)(se,Object(r.a)({},ce,s,{components:c,mdxType:"MDXLayout"}),Object(u.b)("h1",{id:"useobservable"},"useObservable"),Object(u.b)("p",null,"Dá Subscribe e retorna o resultado de um Observable e quando o componente desmonta (unmount) também dá unsubscribe,\ndiminuindo assim o risco de Memory Leak. ",Object(u.b)("strong",{parentName:"p"},"Como useEffect que retorna o valor do Observable")),Object(u.b)("h2",{id:"como-usar"},"Como usar"),Object(u.b)("pre",null,Object(u.b)("code",{parentName:"pre",className:"language-tsx"},"const [value, error, completed, loading] = useObservable(() => userService.get(), []);\n\nreturn (\n  <div>\n    {loading ? 'Carregando' : ''}\n    {value}\n  </div>\n);\n")),Object(u.b)(ie.c,{__position:0,__code:'() => {\n  const [reset, setReset] = useState()\n  const [value, error, completed] = useObservable(\n    () => interval(1000).pipe(take(10)),\n    [reset],\n  )\n  const onReset = useCallback(() => setReset(Date.now()), [])\n  return (\n    <div>\n      <Typography>Value: {value}</Typography>\n      <Typography>Completed: {completed.toString()}</Typography>\n      <Button onClick={onReset} variant="text">\n        Reset\n      </Button>\n    </div>\n  )\n}',__scope:(t={props:s,DefaultLayout:a.a,useState:i.useState,useCallback:i.useCallback,interval:C,of:W,delay:ne,take:$,Button:re.a,Typography:oe.a,Playground:ie.c,useObservable:ue.a},t.DefaultLayout=a.a,t._frontmatter=ae,t),mdxType:"Playground"},(function(){var e=Object(i.useState)(),t=e[0],n=e[1],r=Object(ue.a)((function(){return C(1e3).pipe($(10))}),[t]),o=r[0],a=(r[1],r[2]),c=Object(i.useCallback)((function(){return n(Date.now())}),[]);return Object(u.b)("div",null,Object(u.b)(oe.a,{mdxType:"Typography"},"Value: ",o),Object(u.b)(oe.a,{mdxType:"Typography"},"Completed: ",a.toString()),Object(u.b)(re.a,{onClick:c,variant:"text",mdxType:"Button"},"Reset"))})),Object(u.b)("h2",{id:"cuidados"},"Cuidados"),Object(u.b)("ul",null,Object(u.b)("li",{parentName:"ul"},Object(u.b)("strong",{parentName:"li"},"Erros")," ocorridos serão automaticamentes logados (não tratados) se as o ",Object(u.b)("strong",{parentName:"li"},"onUnhandledError")," no ",Object(u.b)("strong",{parentName:"li"},"setHoustonHooksConfig"),"\nfor setado, mas se utilizar o operador catchError esse erro não será logado pois foi previamente tratado,\nnesse caso o log deve ser feito manualmente."),Object(u.b)("li",{parentName:"ul"},"O valor inicial será ",Object(u.b)("strong",{parentName:"li"},"undefined"),", lembre-se de tratar isso quando estiver usando:")),Object(u.b)(ie.c,{__position:1,__code:"() => {\n  const [reset, setReset] = useState()\n  const [user, error, completed, loading] = useObservable(\n    () => of({ name: 'Eduzz' }).pipe(delay(2000)),\n    [reset],\n  )\n  const onReset = useCallback(() => setReset(Date.now()), [])\n  return (\n    <div>\n      <Typography>Value: {user && user.name}</Typography>\n      <Typography>Loading: {loading.toString()}</Typography>\n      <Button onClick={onReset} variant=\"text\">\n        Reset\n      </Button>\n    </div>\n  )\n}",__scope:(n={props:s,DefaultLayout:a.a,useState:i.useState,useCallback:i.useCallback,interval:C,of:W,delay:ne,take:$,Button:re.a,Typography:oe.a,Playground:ie.c,useObservable:ue.a},n.DefaultLayout=a.a,n._frontmatter=ae,n),mdxType:"Playground"},(function(){var e=Object(i.useState)(),t=e[0],n=e[1],r=Object(ue.a)((function(){return W({name:"Eduzz"}).pipe(ne(2e3))}),[t]),o=r[0],a=(r[1],r[2],r[3]),c=Object(i.useCallback)((function(){return n(Date.now())}),[]);return Object(u.b)("div",null,Object(u.b)(oe.a,{mdxType:"Typography"},"Value: ",o&&o.name),Object(u.b)(oe.a,{mdxType:"Typography"},"Loading: ",a.toString()),Object(u.b)(re.a,{onClick:c,variant:"text",mdxType:"Button"},"Reset"))})),Object(u.b)("h2",{id:"parâmetros-e-retorno"},"Parâmetros e Retorno"),Object(u.b)("pre",null,Object(u.b)("code",{parentName:"pre",className:"language-ts"},"/**\n * @param observableGenerator Função que retorna um Observable\n * @param deps Lista de dependências\n * @returns [\n *    value: valor de retorno do Observable,\n *    error: se ocorrer um erro, ele será passado aqui,\n *    complete: boolean se o observable foi completado ou não,\n *    loading: boolean se esta carregando ou não\n * ]\n */\nexport default useObservable<T>(observableGenerator: () => Observable<T>, deps: React.DependencyList): [T, any, boolean, boolean];\n")))}void 0!==le&&le&&le===Object(le)&&Object.isExtensible(le)&&!le.hasOwnProperty("__filemeta")&&Object.defineProperty(le,"__filemeta",{configurable:!0,value:{name:"MDXContent",filename:"packages/hooks/useObservable/index.mdx"}}),le.isMDXComponent=!0}}]);
//# sourceMappingURL=component---packages-hooks-use-observable-index-mdx-d8eb120d09a3ecce42f5.js.map